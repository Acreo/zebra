################################################################################
#  THIS FILE IS 100% GENERATED BY ZPROJECT; DO NOT EDIT EXCEPT EXPERIMENTALLY  #
#  Read the zproject/README.md for information about making permanent changes. #
################################################################################
cmake_minimum_required (VERSION 2.8)

project (zebrajni CXX)
enable_language (C)

# Search for Find*.cmake files in the following locations
list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}")
list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}/../..")

########################################################################
# JNI dependency
########################################################################
find_package (JNI REQUIRED)
include_directories (${JAVA_INCLUDE_PATH} ${JAVA_INCLUDE_PATH2} src/native/include)

########################################################################
# LIBZMQ dependency
########################################################################
find_package(libzmq REQUIRED)
IF (LIBZMQ_FOUND)
    include_directories(${LIBZMQ_INCLUDE_DIRS})
    list(APPEND MORE_LIBRARIES ${LIBZMQ_LIBRARIES})
ELSE (LIBZMQ_FOUND)
    message( FATAL_ERROR "libzmq not found." )
ENDIF (LIBZMQ_FOUND)

########################################################################
# CZMQ dependency
########################################################################
find_package(czmq REQUIRED)
IF (CZMQ_FOUND)
    include_directories(${CZMQ_INCLUDE_DIRS})
    list(APPEND MORE_LIBRARIES ${CZMQ_LIBRARIES})
ELSE (CZMQ_FOUND)
    message( FATAL_ERROR "czmq not found." )
ENDIF (CZMQ_FOUND)

########################################################################
# LIBMICROHTTPD dependency
########################################################################
find_package(libmicrohttpd REQUIRED)
IF (LIBMICROHTTPD_FOUND)
    include_directories(${LIBMICROHTTPD_INCLUDE_DIRS})
    list(APPEND MORE_LIBRARIES ${LIBMICROHTTPD_LIBRARIES})
ELSE (LIBMICROHTTPD_FOUND)
    message( FATAL_ERROR "libmicrohttpd not found." )
ENDIF (LIBMICROHTTPD_FOUND)

########################################################################
# ZEBRA dependency
########################################################################
find_package(zebra REQUIRED)
IF (ZEBRA_FOUND)
    include_directories(${ZEBRA_INCLUDE_DIRS})
    list(APPEND MORE_LIBRARIES ${ZEBRA_LIBRARIES})
ELSE (ZEBRA_FOUND)
    message( FATAL_ERROR "zebra not found." )
ENDIF (ZEBRA_FOUND)

set (zebrajni_sources
    src/main/c/org_zeromq_zebra_ZebClient.c
    src/main/c/org_zeromq_zebra_ZebHandler.c
    src/main/c/org_zeromq_zebra_XrapMsg.c
    src/main/c/org_zeromq_zebra_XrapTraffic.c
)

add_library (zebrajni SHARED ${zebrajni_sources})
add_definitions (-DZEBRA_BUILD_DRAFT_API)

set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -pedantic -O2")
set (CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/build)
set (CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/build)
set (CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/build)

target_link_libraries (zebrajni ${MORE_LIBRARIES})
